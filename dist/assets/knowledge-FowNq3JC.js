/* empty css             */import{x as B,a2 as D,r as p,c as N,u as R,o as $,b as q,d as g,e as h,g as o,f as l,h as r,y as k,w as d,F,s as P,p as T,t as U,P as A,J as w,i as V,aA as M,z as m,D as z,A as J,B as L,_ as Q}from"./index-DI7bagol.js";import{r as b}from"./requestdb-CT7yqwwj.js";import"./axios-B4uVmeYG.js";const j=i=>(J("data-v-6539a71c"),i=i(),L(),i),G={class:"container"},H={class:"top-section"},K={class:"icon-grid-container"},O={class:"icon-section"},W=j(()=>o("h3",null,"新建",-1)),X={class:"icon-list"},Y={class:"el-icon-plus"},Z={class:"card-header"},ee=["src"],se={slot:"footer",class:"dialog-footer"},ae=B({__name:"knowledge",setup(i){const y=D(),n=p([{id:1,name:"示例知识库",imgSrc:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png"}]),_=p(""),C=N(()=>n.value.filter(s=>s.name.includes(_.value))),S=R(),u=p(!1),c=p(""),I=async()=>{try{const s=await b.post("/show_filesss",{user:y.token.access_token});s.data.success==="true"&&s.data.data.length>0?n.value=s.data.data:console.log(`获取数据失败: ${s.data.message}`)}catch(s){console.log("发生错误: "+s.message)}},x=async()=>{if(c.value){const s=n.value.length>0?n.value[n.value.length-1].id+1:1;n.value.push({id:s,name:c.value,imgSrc:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png"}),console.log(s);const a="admin",f=s,v=c.value,e=new FormData;e.append("username",a),e.append("ids",f.toString()),e.append("kname",v);try{const t=await b.post("/create_milvus",e);t.data.success?(m.success(t.data.message),console.log(t.data.path)):m.success(t.data.message)}catch(t){console.error("Request failed:",t),t.response?m.error("Request failed: "+t.response.data.message):m.error("Network error")}c.value="",u.value=!1}},E=s=>{S.push(`/dataset/${s}`)};return $(()=>{I()}),(s,a)=>{const f=q("Plus"),v=z;return g(),h("div",G,[o("div",H,[l(r(k),{placeholder:"搜索知识库",modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value=e),clearable:"",class:"search-box"},null,8,["modelValue"])]),o("div",K,[o("div",O,[W,o("div",X,[o("div",{class:"custom-card new-card",onClick:a[1]||(a[1]=e=>u.value=!0)},[o("i",Y,[l(v,null,{default:d(()=>[l(f)]),_:1})])]),(g(!0),h(F,null,P(C.value,e=>(g(),T(r(A),{class:"custom-card",key:e.id,onClick:t=>E(e.id)},{header:d(()=>[o("div",Z,U(e.name),1)]),default:d(()=>[o("img",{src:e.imgSrc,style:{width:"100%"}},null,8,ee)]),_:2},1032,["onClick"]))),128))])])]),l(r(M),{title:"新建知识库",modelValue:u.value,"onUpdate:modelValue":a[4]||(a[4]=e=>u.value=e)},{default:d(()=>[l(r(k),{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=e=>c.value=e),placeholder:"输入知识库名字"},null,8,["modelValue"]),o("div",se,[l(r(w),{onClick:a[3]||(a[3]=e=>u.value=!1)},{default:d(()=>[V("取消")]),_:1}),l(r(w),{type:"primary",onClick:x},{default:d(()=>[V("确定")]),_:1})])]),_:1},8,["modelValue"])])}}}),ce=Q(ae,[["__scopeId","data-v-6539a71c"]]);export{ce as default};
