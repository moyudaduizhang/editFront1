/* empty css             *//* empty css                        *//* empty css                  *//* empty css                    *//* empty css                  */import{x as $,j as B,u as D,L as N,r as m,o as S,d as M,p as P,w as s,g as V,f as t,i as c,z as u,J as q,G as z,M as F,N as L,O}from"./index-DIXRcniu.js";import{r as R}from"./request-BFizcD1L.js";import"./axios-B4uVmeYG.js";const U={style:{display:"flex"}},X=$({__name:"dataset",setup(j){const _=B(),f=D(),l=N(),r=m([{date:"2023-05-01",name:"文档1",sorts:"文档"}]),i=m(_.params.id),h=async()=>{try{const e=await R.post("/show_file",{user:l.token.access_token,id:i.value});e.data.success==="true"&&e.data.data.length>0?r.value=e.data.data:console.log(`获取数据失败: ${e.data.message}`)}catch(e){console.log("发生错误: "+e.message)}},g=e=>{f.push({name:"wangEditor",query:{documentName:e}})},k=()=>({user:l.token.access_token,id:i.value}),x={Authorization:`Bearer ${l.token.access_token}`},w=e=>{u.info(`预览分块效果：${e}`)},y=e=>{u.info(`删除文档：${e}`)};S(()=>{h()});const C=e=>{var a;switch((a=e.split(".").pop())==null?void 0:a.toLowerCase()){case"doc":case"docx":return"Word 文档";case"ppt":case"pptx":return"PPT 文件";case"xls":case"xlsx":return"Excel 文件";case"pdf":return"PDF 文件";default:return"未知文件类型"}},b=(e,o)=>{if(e.success==="true"){u.success("上传成功");const a=C(o.name);r.value.push({date:new Date().toISOString().split("T")[0],name:o.name,sorts:a})}else console.log(`上传失败: ${e.message}`)};return(e,o)=>{const a=q,v=z,n=F,E=L,T=O;return M(),P(T,{style:{width:"auto"}},{header:s(()=>[V("div",U,[t(v,{action:"/upload","on-success":b,data:k,headers:x,"show-file-list":!1},{default:s(()=>[t(a,{type:"primary"},{default:s(()=>[c("上传")]),_:1})]),_:1})])]),default:s(()=>[t(E,{data:r.value,border:"",style:{width:"auto",display:"flex"}},{default:s(()=>[t(n,{prop:"date",label:"修改日期",width:"180",align:"center"}),t(n,{prop:"name",label:"名称",width:"400",align:"center"}),t(n,{prop:"sorts",label:"类型",align:"center"}),t(n,{prop:"address",label:"操作",align:"center"},{default:s(({row:d})=>[t(a,{onClick:p=>g(d.name)},{default:s(()=>[c("编辑")]),_:2},1032,["onClick"]),t(a,{onClick:p=>w(d.name)},{default:s(()=>[c("预览分块效果")]),_:2},1032,["onClick"]),t(a,{onClick:p=>y(d.name)},{default:s(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})}}});export{X as default};
