/* empty css             *//* empty css                  *//* empty css                 */import{x as C,r,o as E,d as l,e as d,g as t,F as v,s as g,n as b,t as p,f as m,h as D,E as S,i as f,S as V,w as A,z as B,y as M,J as F,A as q,B as z,_ as N}from"./index-Cq1Zp2HD.js";import{r as w}from"./requestdb-CQ0r-RDs.js";import{r as K}from"./requestai-6Y3IWqQb.js";import"./axios-B4uVmeYG.js";const $=c=>(q("data-v-09b24072"),c=c(),z(),c),J={class:"chat-app"},L={class:"sidebar"},R=$(()=>t("h3",null,"知识库列表",-1)),T=["onClick"],U={class:"chat-area"},j={class:"messages"},G={class:"message-header"},H={class:"sender-name"},O={class:"input-area"},P=C({__name:"Chat_rag",setup(c){const _=r([{id:1,name:"暂无可用知识库"}]),i=r(null),u=r([]),o=r(""),x=r(null),y=async e=>{i.value=e;const s=new FormData;s.append("username","admin"),s.append("id",i.value.toString()),s.append("question","总结文档");try{console.log(i.value);const n=await w.post("/index_milvus",s);console.log("Index Milvus Response:",n.data)}catch(n){console.error("Error interacting with index_milvus:",n)}},h=()=>{if(o.value.trim()==="")return;u.value.push({id:Date.now(),text:o.value,sender:"user"});let e=new FormData;e.append("username","admin"),e.append("number","1"),e.append("cont",o.value),o.value="",K({method:"post",url:"/getAI",data:e}).then(s=>{u.value.push({id:Date.now(),text:s.data.answer,sender:"AI"})}).catch(s=>{B.error("请求错误: "+s)}).finally(()=>{x.value=null})},I=async()=>{try{const e=await w.post("/show_filesss",{user:"admin"});e.data.success==="true"&&e.data.data.length>0?_.value=e.data.data:console.log(`获取数据失败: ${e.data.message}`)}catch(e){console.log("发生错误: "+e.message)}};return E(()=>{I()}),(e,s)=>{const n=M,k=F;return l(),d("div",J,[t("div",L,[R,t("ul",null,[(l(!0),d(v,null,g(_.value,a=>(l(),d("li",{key:a.id,class:b({selected:a.id===i.value}),onClick:Q=>y(a.id)},p(a.name),11,T))),128))])]),t("div",U,[t("div",j,[(l(!0),d(v,null,g(u.value,a=>(l(),d("div",{key:a.id,class:"message"},[t("div",G,[m(D(S),{class:"mr-3",size:32}),t("span",H,p(a.sender==="user"?"用户":"AI"),1)]),f(" "+p(a.text),1)]))),128))]),t("div",O,[m(n,{type:"text",modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=a=>o.value=a),onKeyup:V(h,["enter"]),placeholder:"输入消息"},null,8,["modelValue"]),m(k,{onClick:h},{default:A(()=>[f("发送")]),_:1})])])])}}}),te=N(P,[["__scopeId","data-v-09b24072"]]);export{te as default};
